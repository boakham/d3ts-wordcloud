import { D3CloudTs } from 'd3-cloud-ts';
import * as d3 from 'd3';
export class D3TsWordcloud {
    constructor(targetElement, tags, ratio = 0.5625, fontFamily = 'impact', fontSizeRange = [10, 80]) {
        this.targetElement = targetElement;
        this.tags = tags;
        this.ratio = ratio;
        this.fontFamily = fontFamily;
        this.fontSizeRange = fontSizeRange;
        this.init();
    }
    update() {
        this.cloud.config.font?.(this.fontFamily).spiral?.('archimedean');
        this.fontSize = d3.scaleSqrt().range(this.fontSizeRange);
        if (this.tags.length) {
            this.fontSize.domain([+this.tags[this.tags.length - 1].value || 1, +this.tags[0].value]);
        }
        this.cloud.config.stop?.().words?.(this.tags).start?.();
    }
    init() {
        this.fill = d3.scaleOrdinal(d3.schemeSet1);
        const w = 360; //this.targetElement.parentElement.offsetWidth;
        const h = 200; //this.targetElement.parentElement.offsetWidth * this.ratio;
        this.cloud = new D3CloudTs.Cloud();
        this.cloud.config
            .timeInterval?.(Infinity)
            .size?.([w, h])
            .fontSize?.((_, d, i) => this.fontSize(+d.value))
            .text?.((_, d, i) => d.key)
            .on?.(['end', this.draw.bind(this)]);
        this.svg = d3.select(this.targetElement).append('svg')
            .attr('width', w)
            .attr('height', h);
        this.vis = this.svg.append('g');
        this.vis = this.vis.attr('transform', 'translate(' + [w >> 1, h >> 1] + ')');
        this.update();
        if (window.attachEvent) {
            window.attachEvent('onresize', this.update.bind(this));
        }
        else if (window.addEventListener) {
            window.addEventListener('resize', this.update.bind(this));
        }
    }
    draw(data, bounds) {
        const w = 360; //this.targetElement.parentElement.offsetWidth;
        const h = 200; //this.targetElement.parentElement.offsetWidth * this.ratio;
        this.svg.attr('width', w).attr('height', h);
        const scale = bounds ? Math.min(w / Math.abs(bounds[1].x - w / 2), w / Math.abs(bounds[0].x - w / 2), h / Math.abs(bounds[1].y - h / 2), h / Math.abs(bounds[0].y - h / 2)) / 2 : 1;
        const text = this.vis.selectAll('text').data(data, (d) => d.text.toLowerCase());
        text.transition()
            .duration(1000)
            .attr('transform', (d) => 'translate(' + [d.x, d.y] + ')rotate(' + d.rotate + ')')
            .style('font-size', (d) => d.size + 'px');
        text.enter()
            .append('text')
            .style('opacity', 1e-6)
            .transition()
            .duration(1000)
            .attr('text-anchor', 'middle')
            .attr('transform', (d) => 'translate(' + [d.x, d.y] + ')rotate(' + d.rotate + ')')
            .style('font-size', (d) => d.size + 'px')
            .style('opacity', 1)
            .text((d) => d.text)
            .style('font-family', (d) => d.font)
            .style('fill', (d) => this.fill(d.text.toLowerCase()));
        this.vis.transition()
            .attr('transform', 'translate(' + [w >> 1, h >> 1] + ')scale(' + scale + ')');
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9kM3RzLXdvcmRjbG91ZC9zcmMvbGliL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxhQUFhLENBQUM7QUFFdEMsT0FBTyxLQUFLLEVBQUUsTUFBTSxJQUFJLENBQUM7QUFJekIsTUFBTSxPQUFPLGFBQWE7SUFXdEIsWUFDWSxhQUE2QixFQUM3QixJQUFzQixFQUN0QixRQUFnQixNQUFNLEVBQ3RCLGFBQXFCLFFBQVEsRUFDN0IsZ0JBQTBCLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztRQUpsQyxrQkFBYSxHQUFiLGFBQWEsQ0FBZ0I7UUFDN0IsU0FBSSxHQUFKLElBQUksQ0FBa0I7UUFDdEIsVUFBSyxHQUFMLEtBQUssQ0FBaUI7UUFDdEIsZUFBVSxHQUFWLFVBQVUsQ0FBbUI7UUFDN0Isa0JBQWEsR0FBYixhQUFhLENBQXFCO1FBRTVDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNkLENBQUM7SUFFRCxNQUFNO1FBQ0osSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ2xFLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFekQsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNwQixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFD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QUFDLElBQUksQ0FBQzthQUNkLElBQUksQ0FBQyxhQUFhLEVBQUUsUUFBUSxDQUFDO2FBQzdCLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLFVBQVUsR0FBRyxDQUFDLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQzthQUN0RixLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQzthQUM3QyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQzthQUNuQixJQUFJLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7YUFDeEIsS0FBSyxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQzthQUN4QyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRTlELElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFO2FBQ2xCLElBQUksQ0FBQyxXQUFXLEVBQUUsWUFBWSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsU0FBUyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztJQUNsRixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0QzQ2xvdWRUc30gZnJvbSAnZDMtY2xvdWQtdHMnO1xyXG5cclxuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgRDNUc1dvcmRjbG91ZCB7XHJcblxyXG4gICAgcHJvdGVjdGVkIHN2ZyE6IGQzLlNlbGVjdGlvbjxTVkdTVkdFbGVtZW50LCB1bmtub3duLCBudWxsLCB1bmRlZmluZWQ+O1xyXG4gICAgcHJvdGVjdGVkIHZpcyE6IGFueTtcclxuICBcclxuICAgIHByb3RlY3RlZCBmaWxsITogZDMuU2NhbGVPcmRpbmFsPHN0cmluZywgc3RyaW5nLCBuZXZlcj47XHJcbiAgXHJcbiAgICBwcm90ZWN0ZWQgY2xvdWQhOiBEM0Nsb3VkVHMuQ2xvdWQ7XHJcbiAgXHJcbiAgICBwcm90ZWN0ZWQgZm9udFNpemUhOiBkMy5TY2FsZVBvd2VyPG51bWJlciwgbnVtYmVyLCBuZXZlcj47XHJcbiAgXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgcHJvdGVjdGVkIHRhcmdldEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LFxyXG4gICAgICBwcm90ZWN0ZWQgdGFnczogRDNDbG91ZFRzLldvcmRbXSxcclxuICAgICAgcHJvdGVjdGVkIHJhdGlvOiBudW1iZXIgPSAwLjU2MjUsXHJcbiAgICAgIHByb3RlY3RlZCBmb250RmFtaWx5OiBzdHJpbmcgPSAnaW1wYWN0JyxcclxuICAgICAgcHJvdGVjdGVkIGZvbnRTaXplUmFuZ2U6IG51bWJlcltdID0gWzEwLCA4MF0sXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuY2xvdWQuY29uZmlnLmZvbnQ/Lih0aGlzLmZvbnRGYW1pbHkpLnNwaXJhbD8uKCdhcmNoaW1lZGVhbicpO1xyXG4gICAgICB0aGlzLmZvbnRTaXplID0gZDMuc2NhbGVTcXJ0KCkucmFuZ2UodGhpcy5mb250U2l6ZVJhbmdlKTtcclxuICBcclxuICAgICAgaWYgKHRoaXMudGFncy5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLmZvbnRTaXplLmRvbWFpbihbK3RoaXMudGFnc1t0aGlzLnRhZ3MubGVuZ3RoIC0gMV0udmFsdWUgfHwgMSwgK3RoaXMudGFnc1swXS52YWx1ZV0pO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY2xvdWQuY29uZmlnLnN0b3A/LigpLndvcmRzPy4odGhpcy50YWdzKS5zdGFydD8uKCk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBwcm90ZWN0ZWQgaW5pdCgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5maWxsID0gZDMuc2NhbGVPcmRpbmFsKGQzLnNjaGVtZVNldDEpO1xyXG4gICAgICBjb25zdCB3ID0gMzYwOy8vdGhpcy50YXJnZXRFbGVtZW50LnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcbiAgICAgIGNvbnN0IGggPSAyMDA7Ly90aGlzLnRhcmdldEVsZW1lbnQucGFyZW50RWxlbWVudC5vZmZzZXRXaWR0aCAqIHRoaXMucmF0aW87XHJcbiAgXHJcbiAgICAgIHRoaXMuY2xvdWQgPSBuZXcgRDNDbG91ZFRzLkNsb3VkKCk7XHJcbiAgICAgIHRoaXMuY2xvdWQuY29uZmlnXHJcbiAgICAgICAgLnRpbWVJbnRlcnZhbD8uKEluZmluaXR5KVxyXG4gICAgICAgIC5zaXplPy4oW3csIGhdKVxyXG4gICAgICAgIC5mb250U2l6ZT8uKChfOiBhbnksIGQ6IEQzQ2xvdWRUcy5Xb3JkLCBpOiBudW1iZXIpID0+IHRoaXMuZm9udFNpemUoK2QudmFsdWUpKVxyXG4gICAgICAgIC50ZXh0Py4oKF86IGFueSwgZDogRDNDbG91ZFRzLldvcmQsIGk6IG51bWJlcikgPT4gZC5rZXkpXHJcbiAgICAgICAgLm9uPy4oWydlbmQnLCB0aGlzLmRyYXcuYmluZCh0aGlzKV0pO1xyXG4gIFxyXG4gICAgICB0aGlzLnN2ZyA9IGQzLnNlbGVjdCh0aGlzLnRhcmdldEVsZW1lbnQpLmFwcGVuZCgnc3ZnJylcclxuICAgICAgICAuYXR0cignd2lkdGgnLCB3KVxyXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBoKTtcclxuICAgICAgdGhpcy52aXMgPSB0aGlzLnN2Zy5hcHBlbmQoJ2cnKVxyXG4gICAgICB0aGlzLnZpcyA9IHRoaXMudmlzLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIFt3ID4+IDEsIGggPj4gMV0gKyAnKScpO1xyXG4gIFxyXG4gICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gIFxyXG4gICAgICBpZiAoKDxhbnk+d2luZG93KS5hdHRhY2hFdmVudCkge1xyXG4gICAgICAgICg8YW55PndpbmRvdykuYXR0YWNoRXZlbnQoJ29ucmVzaXplJywgdGhpcy51cGRhdGUuYmluZCh0aGlzKSk7XHJcbiAgICAgIH0gZWxzZSBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy51cGRhdGUuYmluZCh0aGlzKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBcclxuICAgIHByb3RlY3RlZCBkcmF3KGRhdGE6IEQzQ2xvdWRUcy5Xb3JkW10sIGJvdW5kczogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9W10pOiB2b2lkIHtcclxuICBcclxuICAgICAgY29uc3QgdyA9IDM2MDsvL3RoaXMudGFyZ2V0RWxlbWVudC5wYXJlbnRFbGVtZW50Lm9mZnNldFdpZHRoO1xyXG4gICAgICBjb25zdCBoID0gMjAwOy8vdGhpcy50YXJnZXRFbGVtZW50LnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGggKiB0aGlzLnJhdGlvO1xyXG4gICAgICB0aGlzLnN2Zy5hdHRyKCd3aWR0aCcsIHcpLmF0dHIoJ2hlaWdodCcsIGgpO1xyXG4gIFxyXG4gICAgICBjb25zdCBzY2FsZSA9IGJvdW5kcyA/IE1hdGgubWluKFxyXG4gICAgICAgIHcgLyBNYXRoLmFicyhib3VuZHNbMV0ueCAtIHcgLyAyKSxcclxuICAgICAgICB3IC8gTWF0aC5hYnMoYm91bmRzWzBdLnggLSB3IC8gMiksXHJcbiAgICAgICAgaCAvIE1hdGguYWJzKGJvdW5kc1sxXS55IC0gaCAvIDIpLFxyXG4gICAgICAgIGggLyBNYXRoLmFicyhib3VuZHNbMF0ueSAtIGggLyAyKSkgLyAyIDogMTtcclxuICBcclxuICBcclxuICAgICAgY29uc3QgdGV4dCA9IHRoaXMudmlzLnNlbGVjdEFsbCgndGV4dCcpLmRhdGEoZGF0YSwgKGQ6IGFueSkgPT4gZC50ZXh0LnRvTG93ZXJDYXNlKCkpO1xyXG4gIFxyXG4gICAgICB0ZXh0LnRyYW5zaXRpb24oKVxyXG4gICAgICAgIC5kdXJhdGlvbigxMDAwKVxyXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoZDogYW55KSA9PiAndHJhbnNsYXRlKCcgKyBbZC54LCBkLnldICsgJylyb3RhdGUoJyArIGQucm90YXRlICsgJyknKVxyXG4gICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgKGQ6IGFueSkgPT4gZC5zaXplICsgJ3B4Jyk7XHJcbiAgXHJcbiAgICAgIHRleHQuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDFlLTYpXHJcbiAgICAgICAgLnRyYW5zaXRpb24oKVxyXG4gICAgICAgIC5kdXJhdGlvbigxMDAwKVxyXG4gICAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKVxyXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoZDogYW55KSA9PiAndHJhbnNsYXRlKCcgKyBbZC54LCBkLnldICsgJylyb3RhdGUoJyArIGQucm90YXRlICsgJyknKVxyXG4gICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgKGQ6IGFueSkgPT4gZC5zaXplICsgJ3B4JylcclxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKVxyXG4gICAgICAgIC50ZXh0KChkOiBhbnkpID0+IGQudGV4dClcclxuICAgICAgICAuc3R5bGUoJ2ZvbnQtZmFtaWx5JywgKGQ6IGFueSkgPT4gZC5mb250KVxyXG4gICAgICAgIC5zdHlsZSgnZmlsbCcsIChkOiBhbnkpID0+IHRoaXMuZmlsbChkLnRleHQudG9Mb3dlckNhc2UoKSkpO1xyXG4gIFxyXG4gICAgICB0aGlzLnZpcy50cmFuc2l0aW9uKClcclxuICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgW3cgPj4gMSwgaCA+PiAxXSArICcpc2NhbGUoJyArIHNjYWxlICsgJyknKTtcclxuICAgIH1cclxuICB9XHJcbiAgIl19